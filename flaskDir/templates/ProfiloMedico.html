<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <title>Profilo Medico</title>
    <link rel="stylesheet" href="{{url_for('static',filename='grafica/main.css')}}">
</head>

<style>

    footer {
    /* Fissa il footer al fondo dello schermo */
    position: relative;
    bottom: 0;
    width: 100%;
}

    .overflow-y-auto::-webkit-scrollbar{
  display: none;
}

/* Hide scrollbar for IE, Edge and Firefox */
.overflow-y-auto, body {
  -ms-overflow-style: none;
  /* IE and Edge */
  scrollbar-width: none;
  /* Firefox */
}


html, body {
  margin: 0;
  background-color: #15202b;
}

svg.paint-icon {
  fill: currentcolor;
}

</style>

<body class="bg-navbarreg rounded-lg">

      {% include 'Navbar.html' %}

      <div class="p-relative">
        <div class="flex justify-center">

                    <section class="w-3/5" style="max-width:600px;">
                        <!--Content (Center)-->
                            <!-- Nav back-->
                        <div>
                            <div class="bg-prova flex justify-start">
                                <div class="px-4 py-2 mx-2">
                                    <a href="{{url_for('prenotazione')}}" class=" text-2xl font-medium rounded-full text-blue-400 hover:bg-gray-800 hover:text-blue-300 float-right">
                                        <svg class="m-2 h-6 w-6" fill="currentColor" viewBox="0 0 24 24">
                                            <g>
                                                <path d="M20 11H7.414l4.293-4.293c.39-.39.39-1.023 0-1.414s-1.023-.39-1.414 0l-6 6c-.39.39-.39 1.023 0 1.414l6 6c.195.195.45.293.707.293s.512-.098.707-.293c.39-.39.39-1.023 0-1.414L7.414 13H20c.553 0 1-.447 1-1s-.447-1-1-1z">

                                                </path>
                                            </g>
                                        </svg>
                                    </a>
                                </div>

                                <div class="mx-2">
                                    <h2 class="mt-3  mb-0 text-xl font-bold text-white">{%if medico.reparto == None %} Dott.  {{medico.cognome}}  {% endif %}</h2>
                                </div>
                            </div>

                            <hr class="border-gray-800">
                        </div>

<!-- User card-->
                        <div>
                            <div class="w-full bg-cover bg-no-repeat bg-center" style="height: 200px;">
                                <img class=" w-full h-full" src="{{ url_for('static', filename='images/profiloprenotazione.jpg') }}" alt="">
                            </div>

                            <div class="bg-prova p-4">
                                <div class="relative flex w-full">
                                    <!-- Avatar -->
                                    <div class="flex flex-1">
                                        <div style="margin-top: -6rem;">
                                            <div style="height:9rem; width:9rem;" class="md rounded-full relative avatar">
                                                <img style="height:9rem; width:9rem;" class="bg-navbarreg md rounded-full relative border-4 border-white" src="{{ url_for('static', filename='images/iconadottore.png') }}" alt="">
                                                <div class="absolute"></div>
                                            </div>
                                        </div>
                                    </div>

                                </div>


                                <!-- Profile info -->
                                <div class="space-y-1 justify-center w-full mt-3 ml-3">
                                    <!-- User basic-->
                                    <div>
                                        <h2 class="text-xl leading-6 font-bold text-white">
                                           {%if medico.reparto == None %}   {{medico.nome}} {{medico.cognome}}{% else %} {{medico.reparto}}{% endif %} </h2>
                                    </div>

                                    <!-- Description and others -->
                                    <div class="mt-3">
                                        <p class="mt-3 text-white leading-tight mb-2">{{medico.specializzazione}}</p>
                                        <div class="text-white flex">
                                            <span class="flex mr-2"><svg viewBox="0 0 24 24" class="text-white h-5 w-5 paint-icon"><g><path d="M11.96 14.945c-.067 0-.136-.01-.203-.027-1.13-.318-2.097-.986-2.795-1.932-.832-1.125-1.176-2.508-.968-3.893s.942-2.605 2.068-3.438l3.53-2.608c2.322-1.716 5.61-1.224 7.33 1.1.83 1.127 1.175 2.51.967 3.895s-.943 2.605-2.07 3.438l-1.48 1.094c-.333.246-.804.175-1.05-.158-.246-.334-.176-.804.158-1.05l1.48-1.095c.803-.592 1.327-1.463 1.476-2.45.148-.988-.098-1.975-.69-2.778-1.225-1.656-3.572-2.01-5.23-.784l-3.53 2.608c-.802.593-1.326 1.464-1.475 2.45-.15.99.097 1.975.69 2.778.498.675 1.187 1.15 1.992 1.377.4.114.633.528.52.928-.092.33-.394.547-.722.547z"></path><path d="M7.27 22.054c-1.61 0-3.197-.735-4.225-2.125-.832-1.127-1.176-2.51-.968-3.894s.943-2.605 2.07-3.438l1.478-1.094c.334-.245.805-.175 1.05.158s.177.804-.157 1.05l-1.48 1.095c-.803.593-1.326 1.464-1.475 2.45-.148.99.097 1.975.69 2.778 1.225 1.657 3.57 2.01 5.23.785l3.528-2.608c1.658-1.225 2.01-3.57.785-5.23-.498-.674-1.187-1.15-1.992-1.376-.4-.113-.633-.527-.52-.927.112-.4.528-.63.926-.522 1.13.318 2.096.986 2.794 1.932 1.717 2.324 1.224 5.612-1.1 7.33l-3.53 2.608c-.933.693-2.023 1.026-3.105 1.026z"></path></g></svg>{%if medico.reparto != None %} {{medico.ente_sanitario}}{% endif %}</span>
                                            <span class="flex mr-2"><svg viewBox="0 0 24 24" class="text-white h-5 w-5 paint-icon"><g><path d="M19.708 2H4.292C3.028 2 2 3.028 2 4.292v15.416C2 20.972 3.028 22 4.292 22h15.416C20.972 22 22 20.972 22 19.708V4.292C22 3.028 20.972 2 19.708 2zm.792 17.708c0 .437-.355.792-.792.792H4.292c-.437 0-.792-.355-.792-.792V6.418c0-.437.354-.79.79-.792h15.42c.436 0 .79.355.79.79V19.71z"></path><circle cx="7.032" cy="8.75" r="1.285"></circle><circle cx="7.032" cy="13.156" r="1.285"></circle><circle cx="16.968" cy="8.75" r="1.285"></circle><circle cx="16.968" cy="13.156" r="1.285"></circle><circle cx="12" cy="8.75" r="1.285"></circle><circle cx="12" cy="13.156" r="1.285"></circle><circle cx="7.032" cy="17.486" r="1.285"></circle><circle cx="12" cy="17.486" r="1.285"></circle></g></svg> <span class="leading-5 ml-1">{{medico.citt√†}}</span></span>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <hr class="border-gray-800">
                        </div>
                    </section>


        </div>

          <div class="bg-white md:py-8 px-4 lg:max-w-7xl lg:mx-auto lg:px-8">
    <p class="text-4xl font-bold text-gray-800 mb-8">{{data}}</p>
              {% set week=["M","T","W","T","F","S","S"] %}

    <div class="inline-flex flex-col space-y-1 items-start justify-start h-full w-full">
    <div class="inline-flex space-x-28 items-start justify-start pr-24 h-full w-full">
        {% for m in range(week_day-7,week_day) %}
        <p class="w-12 h-full text-sm font-medium text-gray-800 uppercase">{{week[m]}}</p>
        {% endfor %}

    </div>
    <div class="flex flex-wrap items-start justify-start">
        {% set current=giorni[0] %}
        {% set succ=giorni[1] %}
        {% set partenza=giorni[2] %}
        {% for i in range(day,current,7) %}
        <div class="inline-flex items-center justify-start h-full w-full">
            {% for j in range(i,i+7) %}
              {% if j <= current %}
            <div id="open-modal{{j}}" class="flex items-start justify-start w-40 h-full pl-2 pr-32 pt-2.5 pb-24 border border-gray-200" onclick="getId(event)">
                <p class="text-sm font-medium text-gray-800">{{j}}</p>
            </div>
              {% else %}
            <div id="open-modal{{j}}" class="flex items-start justify-start w-40 h-full pl-2 pr-32 pt-2.5 pb-24 border border-gray-200" onclick="getId(event)">
                <p class="text-sm font-medium text-gray-800">{{j-current}}</p>
            </div>
              {% endif %}
            {% endfor %}
        </div>
        {% endfor %}
        {% for i in range(partenza+1,succ,7) %}
        <div class="inline-flex items-center justify-start h-full w-full">
            {% for j in range(i,i+7) %}
              {% if j <= succ %}
            <div id="open-modal{{j}}" class="flex items-start justify-start w-40 h-full pl-2 pr-32 pt-2.5 pb-24 border border-gray-200" onclick="getId(event)">
                <p class="text-sm font-medium text-gray-800">{{j}}</p>
            </div>
              {% endif %}
            {% endfor %}
        </div>
        {% endfor %}

    </div>
</div>
</div>
      </div>


<!--di prova pop up-->
<!-- Main modal -->


<!-- Modal toggle -->
<div id="modal" class="relative z-10 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
  <!--
    Background backdrop, show/hide based on modal state.

    Entering: "ease-out duration-300"
      From: "opacity-0"
      To: "opacity-100"
    Leaving: "ease-in duration-200"
      From: "opacity-100"
      To: "opacity-0"
  -->
  <div class="fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"></div>

  <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
    <div class="flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0">
      <!--
        Modal panel, show/hide based on modal state.

        Entering: "ease-out duration-300"
          From: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
          To: "opacity-100 translate-y-0 sm:scale-100"
        Leaving: "ease-in duration-200"
          From: "opacity-100 translate-y-0 sm:scale-100"
          To: "opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95"
      -->
        <form id="myForm" action="{{url_for('prenotazioni.getMedico')}}" method="POST">
      <div class="relative transform overflow-hidden rounded-lg bg-white text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-lg">
        <div class="bg-white px-4 pb-4 pt-5 sm:p-6 sm:pb-4">
          <div class="sm:flex sm:items-start">
              <div class="mt-3 text-center sm:ml-4 sm:mt-0 sm:text-left">
                  <div class="col-span-2 sm:col-span-1">
                      <label for="category" class="block mb-2 text-sm font-medium text-gray-900">Seleziona l'orario tra quelli disponibili</label>
                      <select id="category" name="ora" class="bg-navbarreg border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">

                          <option selected="selected" value="9">9:00</option>
                          <option value="10">10:00</option>
                          <option value="11">11:00</option>
                          <option value="12">12:00</option>
                          <option value="14">14:00</option>
                          <option value="15">15:00</option>
                          <option value="16">16:00</option>
                          <option value="17">17:00</option>
                          <option value="18">18:00</option>
                          <option value="19">19:00</option>
                      </select>
                      <input type="hidden" id="giorno" name="giorno" value="">
                      <input type="hidden" name="medico" value="{{medico.email}}">
                      <input type="hidden" name="prezzo" value="{{prezzo}}">
                  </div>

                  <p class="mt-4 mb-4 text-sm font-normal text-gray-700 dark:text-gray-400">Il nostro sito ti permette di pagare la prenotazione online o anche in sede. Se vuoi pagare in sede non selezionare alcuna carta.</p>

                  <div class="col-span-2 sm:col-span-1">
                      <label for="category1" class="block mb-2 text-sm font-medium text-gray-900">Seleziona una carta tra quelle disponibili</label>
                      <select id="category1" name="carta" class="bg-navbarreg border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-primary-500 focus:border-primary-500 block w-full p-2.5">
                          <option selected="">Paga al momento della visita</option>
                          {% if carte %}
                          {% for carta in carte %}
                          <option value="{{carta.PAN}}">{{carta.PAN}}</option>
                          {% endfor %}
                          {% endif %}
                      </select>
                  </div>

               {% if current_user.ISEE_ordinario <= 20000 %}
                     <p class="mt-4 mb-4 text-sm font-bold text-black text-center">Sconto ISEE applicato.</p>
               {% endif %}
               {% if not carte %}
                    <div class="mt-6 flex items-center justify-center gap-x-6">
                            <a href="{{url_for('informazionipersonali.getMetodi')}}"  type="submit" class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600">Aggiungi carta</a>
                    </div>
               {% endif %}
              </div>
          </div>
        </div>
              <input type="hidden" id="modalId" name="data" value="">


          <div class="bg-gray-50 px-4 py-3 sm:flex sm:flex-row-reverse sm:px-6">
              <button type="button" onclick="submitForm()" class="inline-flex w-full justify-center rounded-md bg-red-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-red-500 sm:ml-3 sm:w-auto">Accetta</button>
              <button id="close-modal" type="button" class="mt-3 inline-flex w-full justify-center rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:bg-gray-50 sm:mt-0 sm:w-auto">Annulla</button>


        </div>
      </div>

        </form>
    </div>
  </div>
</div>














<script>
    let modalId = "";  // Define a global variable to store the current modal ID

    function getId(event) {
        let id = event.target.id;
        setModal(id);
    }

    function setModal(idModal) {
        modalId = idModal;  // Set the global variable to the current modal ID
        const openModalBtn = document.getElementById(idModal);
        const closeModalBtn = document.getElementById("close-modal");
        document.getElementById("myForm")["giorno"].value=openModalBtn.children[0].innerHTML

        openModalBtn.addEventListener("click", openModal);
        closeModalBtn.addEventListener("click", closeModal);
    }

    function openModal() {
        console.log("apro modal");
        modal.classList.remove("hidden");

        // Set the value of the hidden input field in the form
        document.getElementById("modalId").value = modalId;
    }

    function closeModal() {
        console.log("chiudo modal");
        modal.classList.add("hidden");
    }

    function submitForm() {
        // Manually submit the form
        document.getElementById("myForm").submit();
    }
</script>



<footer class="mt-auto">
    {% include 'Footer2.0.html' %}
</footer>


</body>
</html>
